{% extends "_base.html" %} {% block title %} Admin {% endblock %}
{% block body %}
{% set tree = data %} 

<section id="admin">
  <div class="admin">

    {% for key, node in tree.items() recursive %}
      <div class="card mt-2">

        {# if node has a title #}
        {% if key|int(-1) == -1 %}
          <div class="card-header">
            <b>{{ key }}</b>
          </div>
        {% endif %}

        <div class="card-body">
          {# if node has a renderable value #}
          {% if node is not iterable or node is string %}
            {{ node }}
            
          {# if node has named child nodes #}
          {% elif node is mapping %}
            {{ loop(node.items()) }}

          {# if node has unnamed child nodes #}
          {% else %}
            {% set outerloop = loop %}
            {% for subnode in node %}
              {% set tmpnode = {loop.index|string: subnode} %}
              {{ outerloop(tmpnode.items()) }}
            {% endfor %}
          {% endif %}
        </div>

      </div>
    {% endfor %}

  </div>
</section>
{% endblock %}
