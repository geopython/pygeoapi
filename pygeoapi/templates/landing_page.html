{% extends "_base.html" %}
{% block title %}{{ super() }} {% trans %}Home{% endtrans %} {% endblock %}
{% block body %}

<br/>

<section id="hero">
<div class="row">
  <div class="col-md-8 col-sm-12">

    <div class="p-4 mb-4 bg-dark text-white rounded-3 shadow">
      <div class="d-flex align-items-center mb-3">
          <span class="badge bg-secondary me-2">Pusan National University</span>
          <span class="badge bg-secondary">AIST Tokyo Waterfront</span>
      </div>

      <h1 class="display-5 fw-bold">IndoorGML 2.0 Navigation API</h1>
      <p class="fs-5">
        A pygeoapi-based implementation for indoor spatial data verification,
        navigation graph querying, and visualization.
      </p>

      <div class="mt-4">
        <a href="{{ config['server']['url'] }}/static/workSpace/workSpace.html"
           class="btn btn-primary btn-lg me-2">
          Launch Workspace
        </a>

        <a href="{{ config['server']['url'] }}/openapi?f=html"
           class="btn btn-outline-light btn-lg me-2">
          Swagger UI
        </a>

        <a href="{{ config['server']['url'] }}/openapi?f=html&ui=redoc"
           class="btn btn-outline-light btn-lg">
          ReDoc
        </a>
      </div>
    </div>

    <section id="capabilities" class="mb-4">
      <h2>Core Capabilities</h2>
      <div class="row g-3">
        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>IndoorGML Validation</h5>
              <p class="text-muted">
                Verifies IndoorGML 2.0 schema compliance and structural integrity upon actions.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Navigation Graph Queries</h5>
              <p class="text-muted">
                Query indoor dualSpaces and routes.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Access IndoorGML (JSON) Files</h5>
              <p class="text-muted">
                Retrieve and interact with IndoorGML datasets in IndoorJSON format.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Visualization Ready</h5>
              <p class="text-muted">
                Explore IndoorGML data through integrated visual tools.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="identification">
      <h2>{{ config['metadata']['identification']['title'] }}</h2>
      <p>{{ config['metadata']['identification']['description'] }}</p>

      <p>
        {% for kw in config['metadata']['identification']['keywords'] %}
          <span class="badge bg-primary">{{ kw }}</span>
        {% endfor %}
      </p>

      <div class="card bg-light shadow-sm mb-4">
        <div class="card-body">
          {% if config['metadata']['identification']['terms_of_service'] %}
          <div class="row mb-2">
            <div class="col-sm-4 text-secondary">Terms of Service</div>
            <div class="col-sm-8">
              {{ config['metadata']['identification']['terms_of_service'] | urlize() }}
            </div>
          </div>
          {% endif %}

          {% if config['metadata']['license']['url'] %}
          <div class="row mb-2">
            <div class="col-sm-4 text-secondary">License</div>
            <div class="col-sm-8">
              <a href="{{ config['metadata']['license']['url'] }}">
                {{ config['metadata']['license']['name'] or config['metadata']['license']['url'] }}
              </a>
            </div>
          </div>
          {% endif %}

          <div class="row">
            <div class="col-sm-4 text-secondary">URL</div>
            <div class="col-sm-8">
              <a href="{{ config['metadata']['identification']['url'] }}">
                {{ config['metadata']['identification']['url'] | truncate(70) }}
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    {% if data['collection'] %}
    <section id="collections-list" class="mt-4">
      <h2>Collections</h2>
      <p><a href="{{ config['server']['url'] }}/collections?f=html">View available collections</a></p>
    </section>
    {% endif %}

    {% if data['stac-collection'] %}
    <section id="stac-assets" class="mt-4">
      <h2>SpatioTemporal Assets</h2>
      <p><a href="{{ config['server']['url'] }}/stac?f=html">Browse STAC assets</a></p>
    </section>
    {% endif %}

    {% if data['process'] %}
    <section id="processes" class="mt-4">
      <h2>Processes</h2>
      <p><a href="{{ config['server']['url'] }}/processes?f=html">View available processes</a></p>
    </section>

    <section id="jobs" class="mt-3">
      <h2>Jobs</h2>
      <p><a href="{{ config['server']['url'] }}/jobs">Browse processing jobs</a></p>
    </section>
    {% endif %}
  </div>


  <div class="col-md-4 col-sm-12">
    <div class="card mb-3 shadow-sm">
      <div class="card-header fw-bold">
       {% trans %}Provider{% endtrans %}
      </div>
      <div class="card-body">
        <h6 class="card-title fw-bold text-secondary">{{ config['metadata']['provider']['name'] }}</h6>
        <a href="{{ config['metadata']['provider']['url'] }}" class="text-break small">{{ config['metadata']['provider']['url'] }}</a>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-header fw-bold">
          {% trans %}Contact point{% endtrans %}
      </div>
      <div class="card-body">
        <p class="mb-2">
          <b class="small text-muted text-uppercase">{% trans %}Address{% endtrans %}</b><br/>
          <span>{{ config['metadata']['contact']['name'] }}</span><br/>
          {% for key in ['address', 'city', 'stateorprovince', 'postalcode', 'country'] %}
             {% if key in config['metadata']['contact'] %}
             <span class="small">{{ config['metadata']['contact'][key] }}</span><br/>
             {% endif %}
          {% endfor %}
        </p>
        
        <p class="mb-0">
          <b class="small text-muted text-uppercase">{% trans %}Email{% endtrans %}</b><br/>
          <span><a href="mailto:{{ config['metadata']['contact']['email'] }}">{{ config['metadata']['contact']['email'] }}</a></span><br/>
          
          {% if config['metadata']['contact']['phone'] %}
            <b class="small text-muted text-uppercase d-inline-block mt-2">{% trans %}Telephone{% endtrans %}</b><br/>
            <span><a href="tel:{{ config['metadata']['contact']['phone'] }}">{{ config['metadata']['contact']['phone'] }}</a></span><br/>
          {% endif %}
          
          {% if config['metadata']['contact']['url'] %}
            <b class="small text-muted text-uppercase d-inline-block mt-2">{% trans %}Contact URL{% endtrans %}</b><br/>
            <span><a href="{{ config['metadata']['contact']['url'] }}" class="text-break small">{{ config['metadata']['contact']['url'] }}</a></span><br/>
          {% endif %}
        </p>
      </div>
    </div>
  </div>
</div>  
</section>

{% endblock %}