{% extends "_base.html" %}
{% block title %}{{ super() }} {% trans %}Home{% endtrans %} {% endblock %}
{% block body %}

<br/>

<section id="hero">
<div class="row">
  <div class="col-lg-7 col-sm-12">

    <!-- HERO -->
    <div class="p-4 mb-4 bg-dark text-white rounded-3 shadow">
      <div class="d-flex align-items-center mb-3">
          <span class="badge bg-secondary me-2">Pusan National University</span>
          <span class="badge bg-secondary">AIST Tokyo Waterfront</span>
      </div>

      <h1 class="display-5 fw-bold">IndoorGML 2.0 Navigation API</h1>
      <p class="fs-5">
        A pygeoapi-based implementation for indoor spatial data verification,
        navigation graph querying, and visualization.
      </p>

      <div class="mt-4">
        <a href="{{ config['server']['url'] }}/collections/indoorgml-data?f=html"
           class="btn btn-primary btn-lg me-2">
          Launch Visualizer
        </a>

        <a href="{{ config['server']['url'] }}/openapi?f=html"
           class="btn btn-outline-light btn-lg me-2">
          Swagger UI
        </a>

        <a href="{{ config['server']['url'] }}/openapi?f=html&ui=redoc"
           class="btn btn-outline-light btn-lg">
          ReDoc
        </a>
      </div>
    </div>

    <!-- CAPABILITIES -->
    <section id="capabilities" class="mb-4">
      <h2>Core Capabilities</h2>

      <div class="row g-3">

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>IndoorGML Validation</h5>
              <p class="text-muted">
                Verify IndoorGML 2.0 schema compliance and structural integrity.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Navigation Graph Queries</h5>
              <p class="text-muted">
                Query indoor connectivity graphs and spatial relationships.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Access IndoorGML (JSON) Files</h5>
              <p class="text-muted">
                Retrieve and interact with IndoorGML datasets in JSON format.
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5>Visualization Ready</h5>
              <p class="text-muted">
                Explore validated IndoorGML data through integrated visual tools.
              </p>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- IDENTIFICATION -->
    <section id="identification">
      <h2>{{ config['metadata']['identification']['title'] }}</h2>
      <p>{{ config['metadata']['identification']['description'] }}</p>

      <p>
        {% for kw in config['metadata']['identification']['keywords'] %}
          <span class="badge bg-primary">{{ kw }}</span>
        {% endfor %}
      </p>

      <div class="card bg-light shadow-sm">
        <div class="card-body">

          {% if config['metadata']['identification']['terms_of_service'] %}
          <div class="row mb-2">
            <div class="col-sm-4">Terms of Service</div>
            <div class="col-sm-8">
              {{ config['metadata']['identification']['terms_of_service'] | urlize() }}
            </div>
          </div>
          {% endif %}

          {% if config['metadata']['license']['url'] %}
          <div class="row mb-2">
            <div class="col-sm-4">License</div>
            <div class="col-sm-8">
              <a href="{{ config['metadata']['license']['url'] }}">
                {{ config['metadata']['license']['name'] or config['metadata']['license']['url'] }}
              </a>
            </div>
          </div>
          {% endif %}

          <div class="row">
            <div class="col-sm-4">URL</div>
            <div class="col-sm-8">
              <a href="{{ config['metadata']['identification']['url'] }}">
                {{ config['metadata']['identification']['url'] | truncate(70) }}
              </a>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- COLLECTION LINKS -->
    {% if data['collection'] %}
    <section id="collections-list" class="mt-4">
      <h2>Collections</h2>
      <a href="{{ config['server']['url'] }}/collections?f=html">
        View available collections
      </a>
    </section>
    {% endif %}

    {% if data['stac-collection'] %}
    <section id="stac-assets" class="mt-4">
      <h2>SpatioTemporal Assets</h2>
      <a href="{{ config['server']['url'] }}/stac?f=html">
        Browse STAC assets
      </a>
    </section>
    {% endif %}

    {% if data['process'] %}
    <section id="processes" class="mt-4">
      <h2>Processes</h2>
      <a href="{{ config['server']['url'] }}/processes?f=html">
        View available processes
      </a>
    </section>

    <section id="jobs" class="mt-3">
      <h2>Jobs</h2>
      <a href="{{ config['server']['url'] }}/jobs">
        Browse processing jobs
      </a>
    </section>
    {% endif %}

  </div>

  <!-- SIDEBAR -->
  <div class="col-lg-5 col-sm-12">

    <div class="card mb-3 shadow-sm">
      <div class="card-header"><b>Provider</b></div>
      <div class="card-body">
        <b>{{ config['metadata']['provider']['name'] }}</b><br/>
        <a href="{{ config['metadata']['provider']['url'] }}">
          {{ config['metadata']['provider']['url'] }}
        </a>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-header"><b>Contact</b></div>
      <div class="card-body">

        <b>{{ config['metadata']['contact']['name'] }}</b><br/>

        {% for key in ['address','city','stateorprovince','postalcode','country'] %}
          {% if key in config['metadata']['contact'] %}
            {{ config['metadata']['contact'][key] }}<br/>
          {% endif %}
        {% endfor %}

        <br/>
        <b>Email</b><br/>
        <a href="mailto:{{ config['metadata']['contact']['email'] }}">
          {{ config['metadata']['contact']['email'] }}
        </a>

      </div>
    </div>

  </div>
</div>
</section>

{% endblock %}
